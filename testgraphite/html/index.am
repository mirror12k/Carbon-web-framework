<!doctype html>
<html>
	<body>
<?graphite

	#template yeti
		<h1>hello world</h1>
	#/

	#template my_arg
		<p> hello, my arg is <i>$_</i></p>
	#/

	#template argy
		<div>
			<h1>$name</h1>
			<ul>
				<li>job: $job</li>
				<li>age: $age</li>
				<li>price: $price</li>
			</ul>
		</div>
	#/

	#template loopy
		<ul>
		#foreach $_
			<li>$_</li>
		#/
		</ul>
	#/

	#template multi_yeti
		<div id='yetis'>
			<p>my yetis:</p>
			@yeti
			@yeti
			@yeti
		</div>
	#/

	#template deep_hashes
		<div class="where are we">
		#with $subkey
			<p>$magic</p>
			<p>$more_magic</p>
		#/
		#with $otherkey
			<p>$moar_magic</p>
			#foreach $MOAR
				<p>$_</p>
			#/
		#/
		</div>
	#/

	#template dynamic_includer
		<div class="my dynamics">
			@$_->'dynamic values!'
		</div>
	#/


	#template hashy
		<div class="hashy">
			<h4>hello $name!</h4>
			<p>your last name is $lastname</p>
			<p>your subtotal is $subtotal</p>
			<p>your tax is $tax</p>
			<p>your total is $total</p>
		</div>
	#/

	@my_arg->'testval'
	@my_arg->'hello world'
	@multi_yeti

	<p> my loops: </p>
	@loopy->[]
	@loopy->['asdf']
	@loopy->[5425, 47435,]
	@loopy->['up','up','down','down',   'left'     ,  'right'   ,'left',    'right'   , 'start']


	@hashy->{ name => 'john', lastname => 'smith', subtotal => 100, tax => 10, total => 110 }
	@hashy->{ name => 'jane', lastname => 'doe', subtotal => 50, tax => 14, total => 57 }

?>

<?perl

	# 
	
	echo $graphite->render_template(argy => { name => 'john', job => 'programmer', age => 35, price => 15000});

	echo $graphite->render_template(loopy => [1,2,5]);

	echo $graphite->render_template(loopy => ['a' .. 'e']);
	echo $graphite->render_template(deep_hashes => {
		subkey => {
			magic => 'THIS',
			more_magic => 'IS',
		},
		otherkey => {
			moar_magic => 'SPARTA',
			MOAR => [
				'A',
				'A',
				'A',
				'A',
				'A',
				'A',
				'A',
			],
		},
	});

	echo $graphite->render_template(dynamic_includer => $graphite->get_template('my_arg'));

?>
	</body>
</html>